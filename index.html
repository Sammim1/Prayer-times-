<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>X-FILES ULTRA PRO</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;600;900&display=swap');
body{background:#000;color:#fff;font-family:'Inter',sans-serif}
.glass{background:rgba(255,255,255,.03);backdrop-filter:blur(25px);
border:1px solid rgba(255,255,255,.08);border-radius:30px}
.active-tab{background:#3b82f6;color:#fff}
.file-card{border:1px solid rgba(255,255,255,.1);transition:.2s}
.file-card:hover{border-color:#3b82f6}
</style>
</head>

<body class="p-4 md:p-10">
<div class="max-w-5xl mx-auto">

<!-- HEADER -->
<div class="glass p-6 mb-6 flex justify-between items-center">
  <div>
    <h1 class="text-2xl font-black italic">
      X-FILES <span class="text-blue-500">ULTRA</span>
    </h1>
    <p id="etaText" class="text-[10px] text-gray-400 uppercase">Ready</p>
  </div>

  <div class="flex bg-black/50 p-1 rounded-xl">
    <button onclick="setType('photo')" id="tab-photo"
      class="tab-btn active-tab px-4 py-2 rounded-lg text-xs font-bold">PHOTO</button>
    <button onclick="setType('video')" id="tab-video"
      class="tab-btn px-4 py-2 text-xs text-gray-400">VIDEO</button>
    <button onclick="setType('document')" id="tab-document"
      class="tab-btn px-4 py-2 text-xs text-gray-400">FILES</button>
  </div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

<!-- LEFT -->
<div>
<label class="glass h-48 flex flex-col items-center justify-center cursor-pointer
border-2 border-dashed border-gray-700 hover:border-blue-500">

<input id="fileInput" type="file" multiple class="hidden">

<span id="uploadIcon" class="text-5xl">üñºÔ∏è</span>
<p class="text-[10px] text-gray-400 mt-2 uppercase">Select Files</p>
</label>

<button onclick="ignite()" id="sendBtn"
class="w-full mt-5 py-4 bg-white text-black font-black rounded-2xl">
START TRANSFER
</button>
</div>

<!-- RIGHT -->
<div class="lg:col-span-2 glass p-5 min-h-[400px]">
<div class="flex justify-between mb-4">
<div>Queue: <span id="qCount" class="text-blue-500 font-bold">0</span></div>
<div>Sent: <span id="sCount" class="text-green-500 font-bold">0</span></div>
</div>

<div id="previewGrid"
class="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"></div>
</div>

</div>
</div>

<script>
const TOKEN = "YOUR_BOT_TOKEN";
const CHAT_ID = "YOUR_CHAT_ID";

let queue = [];
let currentType = "photo";

const fileInput = document.getElementById("fileInput");
const qCount = document.getElementById("qCount");
const sCount = document.getElementById("sCount");
const etaText = document.getElementById("etaText");
const uploadIcon = document.getElementById("uploadIcon");
const previewGrid = document.getElementById("previewGrid");

function setType(type){
  currentType = type;

  document.querySelectorAll(".tab-btn").forEach(b=>{
    b.classList.remove("active-tab"); b.classList.add("text-gray-400");
  });
  document.getElementById("tab-"+type).classList.add("active-tab");

  if(type==="photo"){
    fileInput.accept="image/*";
    uploadIcon.innerText="üñºÔ∏è";
  }
  else if(type==="video"){
    fileInput.accept="video/*";
    uploadIcon.innerText="üé¨";
  }
  else{
    fileInput.accept="*/*";
    uploadIcon.innerText="üìÇ";
  }
}

fileInput.onchange = e=>{
  const files = Array.from(e.target.files);
  queue.push(...files);
  render();
  e.target.value="";
};

function render(){
  previewGrid.innerHTML="";
  qCount.innerText = queue.length;

  queue.forEach(f=>{
    const d=document.createElement("div");
    d.className="aspect-square rounded-xl overflow-hidden file-card bg-white/5 flex items-center justify-center";

    if(f.type.startsWith("image/")){
      d.innerHTML=`<img src="${URL.createObjectURL(f)}" class="w-full h-full object-cover">`;
    } else {
      d.innerHTML=`<div class="text-[9px] p-2 text-gray-400 break-all">${f.name}</div>`;
    }
    previewGrid.appendChild(d);
  });
}

async function ignite(){
  if(!queue.length) return;

  let sent = 0;
  etaText.innerText="Uploading...";
  sendBtn.disabled=true;

  if(currentType==="photo"){
    for(let i=0;i<queue.length;i+=10){
      let batch=queue.slice(i,i+10);
      let done=false;

      while(!done){
        try{
          const fd=new FormData();
          fd.append("chat_id",CHAT_ID);
          fd.append("media",JSON.stringify(
            batch.map((_,x)=>({type:"photo",media:`attach://p${x}`}))
          ));
          batch.forEach((f,x)=>fd.append(`p${x}`,f));

          const r=await fetch(
            `https://api.telegram.org/bot${TOKEN}/sendMediaGroup`,
            {method:"POST",body:fd}
          );

          if(r.ok){
            done=true;
            sent+=batch.length;
            sCount.innerText=sent;
            qCount.innerText=queue.length-sent;
            etaText.innerText=`${sent}/${queue.length}`;
          }
        }catch{}
      }
    }
  } else {
    const api=currentType==="video"?"sendVideo":"sendDocument";

    for(let f of queue){
      let ok=false;
      while(!ok){
        try{
          const fd=new FormData();
          fd.append("chat_id",CHAT_ID);
          fd.append(currentType,f);
          const r=await fetch(
            `https://api.telegram.org/bot${TOKEN}/${api}`,
            {method:"POST",body:fd}
          );
          if(r.ok){
            ok=true;
            sent++;
            sCount.innerText=sent;
            qCount.innerText=queue.length-sent;
          }
        }catch{}
      }
    }
  }

  etaText.innerText="ALL DONE ‚úî";
}
</script>

</body>
</html>
