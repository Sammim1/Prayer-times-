<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>X-FILES ULTRA PRO</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;600;900&display=swap');
body{background:#000;color:#fff;font-family:'Inter',sans-serif}
.glass{background:rgba(255,255,255,.03);backdrop-filter:blur(25px);
border:1px solid rgba(255,255,255,.08);border-radius:30px}
.active-tab{background:#3b82f6;color:#fff}
.file-card{border:1px solid rgba(255,255,255,.1);transition:.3s}
.file-card:hover{border-color:#3b82f6;transform:translateY(-4px)}
</style>
</head>

<body class="p-4 md:p-10">

<div class="max-w-5xl mx-auto">

<!-- HEADER -->
<div class="glass p-6 mb-6 flex justify-between items-center">
  <div>
    <h1 class="text-2xl font-black italic">
      X-FILES <span class="text-blue-500">ULTRA</span>
    </h1>
    <p id="eta-text" class="text-[10px] text-gray-400 uppercase">
      Ready
    </p>
  </div>

  <div class="flex bg-black/50 p-1 rounded-xl">
    <button id="tab-photo" onclick="setType('photo')" class="tab-btn active-tab px-4 py-2 rounded-lg text-xs font-bold">PHOTO</button>
    <button id="tab-video" onclick="setType('video')" class="tab-btn px-4 py-2 text-xs text-gray-400">VIDEO</button>
    <button id="tab-document" onclick="setType('document')" class="tab-btn px-4 py-2 text-xs text-gray-400">FILES</button>
  </div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

<!-- LEFT -->
<div>
  <label class="glass h-48 flex flex-col items-center justify-center cursor-pointer border-2 border-dashed border-gray-700 hover:border-blue-500">
    
    <!-- üî• UPDATED INPUT: GALLERY OPENS -->
    <input 
      type="file"
      id="fileInput"
      multiple
      accept="image/*"
      class="hidden">
    <!-- üî• END -->

    <span id="upload-icon" class="text-5xl">üñºÔ∏è</span>
    <p class="text-[10px] text-gray-400 mt-2 uppercase">Add Photos</p>
  </label>

  <button id="sendBtn" onclick="ignite()"
    class="w-full mt-5 py-4 bg-white text-black font-black rounded-2xl hover:bg-blue-600 hover:text-white">
    START TRANSFER
  </button>
</div>

<!-- RIGHT -->
<div class="lg:col-span-2 glass p-5 min-h-[400px]">
  <div class="flex justify-between mb-4">
    <div>Queue: <span id="q-count" class="text-blue-500 font-bold">0</span></div>
    <div>Sent: <span id="s-count" class="text-green-500 font-bold">0</span></div>
  </div>

  <div id="preview-grid" class="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"></div>
</div>

</div>
</div>

<script>
const TOKEN = "YOUR_BOT_TOKEN";
const CHAT_ID = "YOUR_CHAT_ID";

let queue = [];
let currentType = "photo";

function setType(type){
  currentType = type;
  document.querySelectorAll(".tab-btn").forEach(b=>{
    b.classList.remove("active-tab"); b.classList.add("text-gray-400");
  });
  document.getElementById("tab-"+type).classList.add("active-tab");
  document.getElementById("upload-icon").innerText =
    type==="photo"?"üñºÔ∏è":type==="video"?"üé¨":"üìÇ";
}

fileInput.onchange = e=>{
  queue.push(...e.target.files);
  render();
  e.target.value="";
};

function render(){
  preview-grid.innerHTML="";
  q-count.innerText = queue.length;
  queue.forEach(f=>{
    const d=document.createElement("div");
    d.className="aspect-square rounded-xl overflow-hidden file-card bg-white/5";
    d.innerHTML=`<img src="${URL.createObjectURL(f)}" class="w-full h-full object-cover">`;
    preview-grid.appendChild(d);
  });
}

async function ignite(){
  if(!queue.length) return;

  sendBtn.disabled=true;
  sendBtn.innerText="UPLOADING...";
  let sent=0;

  for(let i=0;i<queue.length;i+=10){
    let batch=queue.slice(i,i+10);
    let ok=false;
    while(!ok){
      try{
        const fd=new FormData();
        fd.append("chat_id",CHAT_ID);
        fd.append("media",JSON.stringify(
          batch.map((_,x)=>({type:"photo",media:`attach://p${x}`}))
        ));
        batch.forEach((f,x)=>fd.append(`p${x}`,f));

        const r=await fetch(`https://api.telegram.org/bot${TOKEN}/sendMediaGroup`,
          {method:"POST",body:fd});

        if(r.ok){
          ok=true;
          sent+=batch.length;
          s-count.innerText=sent;
          q-count.innerText=queue.length-sent;
          eta-text.innerText=`Uploading ${sent}/${queue.length}`;
        } else await sleep(2000);
      }catch{ await sleep(2000); }
    }
  }

  eta-text.innerText="ALL PHOTOS SENT ‚úî";
  sendBtn.innerText="DONE";
}

const sleep = ms => new Promise(r=>setTimeout(r,ms));
</script>

</body>
</html>
