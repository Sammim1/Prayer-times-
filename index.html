<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimalist Sender</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #000; color: #fff; font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .upload-zone { border: 2px dashed rgba(255, 255, 255, 0.1); transition: 0.3s; }
        .upload-zone:hover { border-color: #3b82f6; background: rgba(59, 130, 246, 0.05); }
        .img-container:hover .close-btn { opacity: 1; }
        .close-btn { opacity: 0; transition: 0.2s; background: rgba(239, 68, 68, 0.9); }
    </style>
</head>
<body class="p-6 md:p-12">

    <div class="max-w-5xl mx-auto">
        <div class="flex justify-between items-end mb-12">
            <div class="text-4xl font-light tracking-tighter uppercase">Gallery <span class="font-bold text-blue-500">.</span></div>
            <div class="flex items-baseline gap-2">
                <span id="sent-count" class="text-5xl font-black text-white">0</span>
                <span class="text-gray-600 text-xl">/</span>
                <span id="total-count" class="text-xl text-gray-500">0</span>
            </div>
        </div>

        <div class="w-full h-[2px] bg-gray-900 mb-12 overflow-hidden">
            <div id="bar" class="h-full bg-blue-500 w-0 transition-all duration-500"></div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <div class="lg:col-span-1">
                <label class="upload-zone rounded-[30px] p-12 flex flex-col items-center justify-center cursor-pointer mb-6 h-64">
                    <input type="file" id="fileInput" multiple accept="image/*" class="hidden">
                    <div class="text-4xl mb-4">+</div>
                </label>
                
                <button onclick="sendImages()" id="mainBtn" class="w-full py-5 bg-white text-black font-bold rounded-[20px] hover:bg-blue-500 hover:text-white transition-all active:scale-95">
                    SEND
                </button>
            </div>

            <div class="lg:col-span-3 glass rounded-[40px] p-8 min-h-[400px]">
                <div id="preview-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    </div>
            </div>
        </div>
    </div>

    <script>
        const TOKEN = "7803047176:AAENBpYrmbNuFiBsAMf8fwFybVOsSNTgQM4";
        const CHAT_ID = "5923885908";
        let files = [];

        const fileInput = document.getElementById('fileInput');
        const previewGrid = document.getElementById('preview-grid');
        const totalCountDisp = document.getElementById('total-count');
        const sentCountDisp = document.getElementById('sent-count');
        const bar = document.getElementById('bar');

        fileInput.onchange = (e) => {
            const newFiles = Array.from(e.target.files);
            files = [...files, ...newFiles];
            render();
        };

        function render() {
            previewGrid.innerHTML = "";
            totalCountDisp.innerText = files.length;
            
            files.forEach((file, i) => {
                const url = URL.createObjectURL(file);
                const div = document.createElement('div');
                div.className = "relative img-container aspect-square rounded-2xl overflow-hidden glass";
                div.innerHTML = `
                    <img src="${url}" class="w-full h-full object-cover">
                    <button onclick="remove(${i})" class="close-btn absolute inset-0 flex items-center justify-center text-white text-xl">âœ•</button>
                `;
                previewGrid.appendChild(div);
            });
        }

        function remove(i) {
            files.splice(i, 1);
            render();
        }

        async function sendImages() {
            if(files.length === 0) return;
            const btn = document.getElementById('mainBtn');
            btn.disabled = true;
            btn.innerText = "SENDING...";

            let sent = 0;
            const total = files.length;

            // Batch Processing for Speed
            for (let i = 0; i < total; i += 3) {
                const batch = files.slice(i, i + 3);
                await Promise.all(batch.map(async (file) => {
                    const fd = new FormData();
                    fd.append("chat_id", CHAT_ID);
                    fd.append("photo", file);
                    try {
                        const res = await fetch(`https://api.telegram.org/bot${TOKEN}/sendPhoto`, { method: "POST", body: fd });
                        if(res.ok) {
                            sent++;
                            sentCountDisp.innerText = sent;
                            bar.style.width = (sent / total * 100) + "%";
                        }
                    } catch(e) {}
                }));
            }

            btn.innerText = "DONE";
            setTimeout(() => {
                btn.disabled = false;
                btn.innerText = "SEND";
                files = [];
                render();
                bar.style.width = "0%";
                sentCountDisp.innerText = "0";
            }, 2000);
        }
    </script>
</body>
</html>
